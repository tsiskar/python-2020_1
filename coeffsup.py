import sympy as sp
from sympy.solvers import solve
from sympy import Symbol
import random
x = sp.Symbol ( 'x')
h1=Symbol('h1')
h2=Symbol('h2')
E=Symbol('E')
L=Symbol('L')
c1=Symbol('c1')
c2=Symbol('c2')
c3=Symbol('c3')
G0=5.6
a=10
n=1
b1 = 1
b2 = 0
b3 = (G0 - a**2)/G0**2
b4 = -10**(-3)*a/(2*G0**2)
f=b1*x**3+b2*x**2+b3*x+b4
X=sp.solve(f)

def coefficients_t1(L,E,h1,h2):
    global C1, C2, C3, C11, C22
    h11=h1-(L**2*((c1**2/X[0]) + (c2**2/X[1]) + (c3**2/X[2]))/2+L**2*G0*(G0*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
              c3**2*X[2]**2)/(n*a) + ((c1**2 + c2**2 + c3**2)/(n*a)))+L**2*G0*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
                c3**2*X[2]**2)+L**2*G0**4*(c1**2*X[0]**5 + c2**2*X[1]**5 + 
             c3**2*X[2]**5)/(2*(a**2)*(n**2)) + 
             L**2*G0**3*(c1**2*X[0]**3 + c2**2*X[1]**3
             + c3**2*X[2]**3)/(a**2*n**2)+ 
           L**2*G0**2*(c1**2*X[0] + c2**2*X[1] + c3**2*X[2])/(2*a**2*n**2)+ 
         L**2*G0**3*(c1**2*X[0]**4 + c2**2*X[1]**4 + 
             c3**2*X[2]**4)/(a*n)+ 
         L**2*G0**2*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
             c3**2*X[2]**2)/(a*n) + 
         L**2*G0**2*(c1**2*X[0]**3 + c2**2*X[1]**3 + 
             c3**2*X[2]**3)/(2))
    C1=solve(h11,c1)
    def C1_f(c2,c3):
            global C11
            h11=h1-(L**2*((c1**2/X[0]) + (c2**2/X[1]) + (c3**2/X[2]))/2+L**2*G0*(G0*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
                  c3**2*X[2]**2)/(n*a) + ((c1**2 + c2**2 + c3**2)/(n*a)))+L**2*G0*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
                    c3**2*X[2]**2)+L**2*G0**4*(c1**2*X[0]**5 + c2**2*X[1]**5 + 
                 c3**2*X[2]**5)/(2*(a**2)*(n**2)) + 
                 L**2*G0**3*(c1**2*X[0]**3 + c2**2*X[1]**3
                 + c3**2*X[2]**3)/(a**2*n**2)+ 
               L**2*G0**2*(c1**2*X[0] + c2**2*X[1] + c3**2*X[2])/(2*a**2*n**2)+ 
             L**2*G0**3*(c1**2*X[0]**4 + c2**2*X[1]**4 + 
                 c3**2*X[2]**4)/(a*n)+ 
             L**2*G0**2*(c1**2*X[0]**2 + c2**2*X[1]**2 + 
                 c3**2*X[2]**2)/(a*n) + 
             L**2*G0**2*(c1**2*X[0]**3 + c2**2*X[1]**3 + 
                 c3**2*X[2]**3)/(2))  
            C11=solve(h11,c1)        
    h22=h2-(2*L**2*G0*((G0*(C1[1]**2*X[0]**2 + c3**2*X[2]**2)/(n*
                a)) + ((10**(-3))*(C1[1]**2*X[0] + c2**2*X[1] + 
                c3**2*X[2])/2 + ((C1[1]**2 + c2**2 + c3**2)/(n*a))) + 
            2*L**2*G0**2*((G0*(C1[1]**2*X[0]**4 + c3**2*X[2]**4)/(n*
            a)) + ((C1[1]**2*X[1]**2 + c3**2*X[2]**2)/(n*a)))))
    C2=solve(h22,c2)
    C1_f(C2[1],c3)
    #print('c11=',C11)
    def C2_f(c3):
        global C22
        h22=h2-(2*L**2*G0*((G0*(C11[1]**2*X[0]**2 + c3**2*X[2]**2)/(n*
                    a)) + ((10**(-3))*(C11[1]**2*X[0] + c2**2*X[1] + 
                    c3**2*X[2])/2 + ((C11[1]**2 + c2**2 + c3**2)/(n*a))) + 
                2*L**2*G0**2*((G0*(C11[1]**2*X[0]**4 + c3**2*X[2]**4)/(n*
                a)) + ((C11[1]**2*X[1]**2 + c3**2*X[2]**2)/(n*a)))))
        C22=solve(h22,c2)
    C2_f(c3)
    E1 = E-((L**2/4 + L**2/(2*n**2*a**2))*(C11[1]**2 + C22[1]**2 + 
            c3**2) + ((10**(-3)*L**2)*(C11[1]**2*X[0]+ C22[1]**2*X[1] + 
           c3**2*X[2]**2) + (L**2*
            G0**2/(2*n**2*a**2))*(C11[1]**2*X[0]**4+C22[1]**2*X[1]**4 + c3**2*X[2]**4)))
    C3=solve(E1,c3)
    C1_f(c2,C3[1])
    C2_f(C3[1])
    #print('c22=',C22)
    #print('C2[1]=',C22[1])
    C1_f(C22[1],C3[1]) 
    print('c3=',C3[1])
    print('c2=',C22[1])
    print('c1=',C11[1])
coefficients_t1(1, 100, 10**3, 0.8*10**3)

